# 工作收入追踪 Chrome 插件 PRD

## 1. 文档信息
- 产品名称: 工作收入追踪（New Tab Extension）
- 当前版本: v1.0.0
- 文档版本: v1.0
- 更新时间: 2026-02-28

## 2. 产品背景
用户希望在每次打开 Chrome 新标签页时，看到“今天已经赚到多少钱”，把抽象的时间成本可视化，提升时间感知和工作节奏管理。

## 3. 产品目标
- 让用户在 1 秒内看到今日累计收益。
- 可配置个人工作参数（收入与上下班时间）。
- 提供直观进度反馈（今日进度条百分比）。

## 4. 目标用户
- 上班族/自由职业者。
- 对时间价值敏感，希望量化每日工作产出的人群。

## 5. 核心场景
1. 用户打开新标签页，看到今日收益实时更新。
2. 用户点击“设置”，调整税后月收入和工作时间段。
3. 用户查看“今日进度条”，了解一天时间推进到多少。

## 6. 功能需求

### 6.1 新标签页展示
- 作为 Chrome New Tab 页面展示。
- 展示字段:
  - 文案: 今天已经骗到了
  - 金额: `¥xx.xx`（每秒更新）
  - 工作时长: `X小时Y分钟Z秒`
  - 今日进度: 进度条 + 百分比文本

### 6.2 设置能力
- 可配置字段:
  - 月薪（税后，RMB）
  - 工作时长（小时）
  - 上班开始时间
  - 午休开始时间
  - 午休结束时间
  - 下班时间
- 支持新标签页内弹窗设置。
- 支持扩展 `options_page` 设置。
- 设置保存到 `chrome.storage.sync`。

### 6.3 默认配置
- 月薪: 15000
- 工作时长（小时）: 8
- 上班开始时间: 09:00
- 午休开始时间: 12:00
- 午休结束时间: 13:30
- 下班时间: 18:00

## 7. 计算规则（产品口径）
- 日薪: `月薪 / 21.75`
- 今日有效工作秒数:
  - 从上班时间开始累计；
  - 午休区间不累计；
  - 到下班时间后不再增长；
  - 上限受“工作时长（小时）”与“排班净时长”共同约束，取更小值。
- 今日收益:
  - `日薪 * (今日有效工作小时 / 工作时长小时)`
- 今日进度百分比:
  - 仅按上班到下班时间线性计算；
  - 上班前为 0%，下班后为 100%。

## 8. 非功能需求
- 刷新频率: 1 秒。
- 本地可用: 无后端依赖，离线可用。
- 数据安全: 仅本地/Chrome 同步存储，不上传服务端。
- 兼容性: Chrome MV3。

## 9. 成功指标（建议）
- D1 留存（安装后次日打开率）>= 35%
- 人均日打开次数 >= 8
- 设置完成率（首次进入后完成设置）>= 70%

## 10. 已知问题与限制
- 目前文案与货币单位固定（未支持多语言/多币种）。
- 未提供历史趋势（仅展示“今天”）。
- 当用户历史存储已存在旧值时，默认值不会自动覆盖。
- 当前代码存在中文字符串编码异常风险（需在迭代中统一 UTF-8 无 BOM/构建链）。

## 11. 迭代路线图（建议）
- v1.1:
  - 增加“今天预计总收入/剩余可赚金额”。
  - 增加“重置为默认设置”按钮。
  - 修复并统一中文编码。
- v1.2:
  - 周/月累计统计（本地）。
  - 历史曲线图（近 7 天）。
  - 自定义文案模板。
- v1.3:
  - 多币种支持与汇率更新策略。
  - 导出 CSV。

## 12. 验收标准（MVP）
1. 新标签页可正常打开并显示收益、时长、进度条。
2. 设置可保存，刷新页面后配置仍生效。
3. 到达下班时间后收益不再增长，进度条为 100%。
4. 午休时间段内工作时长不增长。
